storedFitFunctionOutput$residual_Sum_of_Squares))
}
return(storedFitFunctionOutput)
}
counterFunction(3,5,7,20)
fitFunctionOutput
counterFunction(3,5,7,20)
fitFunctionOutput
fitFunctionOutput
counterFunction <-
function(data,fitFunction, n_runs_min, n_runs_max, ...)
{
counterBetterFit=0
counterCorrectFit=0
counterTotalFit=0
residual_Sum_of_Squares_min=Inf
fitFunctionOutput$residual_Sum_of_Squares=Inf
while(counterCorrectFit<n_runs_min & counterTotalFit<n_runs_max)
{
fitFunctionOutput=exampleFitFunction(randomParameter)
browser()
if(fitFunctionOutput[[1]]){
counterCorrectFit=counterCorrectFit+1
if(residual_Sum_of_Squares_min>fitFunctionOutput$residual_Sum_of_Squares){
counterBetterFit=counterBetterFit+1
residual_Sum_of_Squares_min=fitFunctionOutput$residual_Sum_of_Squares
storedFitFunctionOutput=fitFunctionOutput
}
}
counterTotalFit=counterTotalFit+1
print(c(counterBetterFit,
counterCorrectFit,
counterTotalFit,
storedFitFunctionOutput$residual_Sum_of_Squares))
}
return(storedFitFunctionOutput)
}
source('~/GitHub/sicegar/R/counterFunction.R', echo=TRUE)
counterFunction(3,5,7,20)
counterFunction(3,5,7,20)
fitFunctionOutput
counterFunction(3,5,7,20)
fitFunctionOutput
counterFunction(3,5,7,20)
fitFunctionOutput
counterFunction(3,5,7,20)
fitFunctionOutput
storedFitFunctionOutput
counterFunction <-
function(data,fitFunction, n_runs_min, n_runs_max, ...)
{
counterBetterFit=0
counterCorrectFit=0
counterTotalFit=0
residual_Sum_of_Squares_min=Inf
storedFitFunctionOutput$residual_Sum_of_Squares=Inf
while(counterCorrectFit<n_runs_min & counterTotalFit<n_runs_max)
{
fitFunctionOutput=exampleFitFunction(randomParameter)
browser()
if(fitFunctionOutput[[1]]){
counterCorrectFit=counterCorrectFit+1
if(residual_Sum_of_Squares_min>fitFunctionOutput$residual_Sum_of_Squares){
counterBetterFit=counterBetterFit+1
residual_Sum_of_Squares_min=fitFunctionOutput$residual_Sum_of_Squares
storedFitFunctionOutput=fitFunctionOutput
}
}
counterTotalFit=counterTotalFit+1
print(c(counterBetterFit,
counterCorrectFit,
counterTotalFit,
storedFitFunctionOutput$residual_Sum_of_Squares))
}
return(storedFitFunctionOutput)
}
counterFunction(3,5,7,20)
a=list()
a
a$b=1
a
counterFunction <-
function(data,fitFunction, n_runs_min, n_runs_max, ...)
{
counterBetterFit=0
counterCorrectFit=0
counterTotalFit=0
residual_Sum_of_Squares_min=Inf
storedFitFunctionOutput=list()
storedFitFunctionOutput$residual_Sum_of_Squares=Inf
while(counterCorrectFit<n_runs_min & counterTotalFit<n_runs_max)
{
fitFunctionOutput=exampleFitFunction(randomParameter)
browser()
if(fitFunctionOutput[[1]]){
counterCorrectFit=counterCorrectFit+1
if(residual_Sum_of_Squares_min>fitFunctionOutput$residual_Sum_of_Squares){
counterBetterFit=counterBetterFit+1
residual_Sum_of_Squares_min=fitFunctionOutput$residual_Sum_of_Squares
storedFitFunctionOutput=fitFunctionOutput
}
}
counterTotalFit=counterTotalFit+1
print(c(counterBetterFit,
counterCorrectFit,
counterTotalFit,
storedFitFunctionOutput$residual_Sum_of_Squares))
}
return(storedFitFunctionOutput)
}
counterFunction(3,5,7,20)
fitFunctionOutput
"a" %in% c("a","b")
"a" %in% c("c","b")
"a" %in% c("a","b")
!("a" %in% c("a","b"))
counterFunction <-
function(data,fitFunction, n_runs_min, n_runs_max, ...)
{
counterBetterFit=0
counterCorrectFit=0
counterTotalFit=0
residual_Sum_of_Squares_min=Inf
storedFitFunctionOutput=list()
storedFitFunctionOutput$residual_Sum_of_Squares=Inf
while(counterCorrectFit<n_runs_min & counterTotalFit<n_runs_max)
{
if(!(fitFunction %in% c("linear", "sigmoidal", "double_sigmoidal", "test")) )
{print("fitFunction should be one of linear, sigmoidal, double_sigmoidal, test")}
if(fitFunction == "test"){fitFunctionOutput=exampleFitFunction(randomParameter)}
if(fitFunctionOutput[[1]]){
counterCorrectFit=counterCorrectFit+1
if(residual_Sum_of_Squares_min>fitFunctionOutput$residual_Sum_of_Squares){
counterBetterFit=counterBetterFit+1
residual_Sum_of_Squares_min=fitFunctionOutput$residual_Sum_of_Squares
storedFitFunctionOutput=fitFunctionOutput
}
}
counterTotalFit=counterTotalFit+1
print(c(counterBetterFit,
counterCorrectFit,
counterTotalFit,
storedFitFunctionOutput$residual_Sum_of_Squares))
}
return(storedFitFunctionOutput)
}
counterFunction(3,5,7,20)
counterFunction <-
function(data,fitFunction, n_runs_min, n_runs_max, ...)
{
if(!(fitFunction %in% c("linear", "sigmoidal", "double_sigmoidal", "test")) )
{stop("fitFunction should be one of linear, sigmoidal, double_sigmoidal, test")}
counterBetterFit=0
counterCorrectFit=0
counterTotalFit=0
residual_Sum_of_Squares_min=Inf
storedFitFunctionOutput=list()
storedFitFunctionOutput$residual_Sum_of_Squares=Inf
while(counterCorrectFit<n_runs_min & counterTotalFit<n_runs_max)
{
if(fitFunction == "test"){fitFunctionOutput=exampleFitFunction(randomParameter)}
if(fitFunctionOutput[[1]]){
counterCorrectFit=counterCorrectFit+1
if(residual_Sum_of_Squares_min>fitFunctionOutput$residual_Sum_of_Squares){
counterBetterFit=counterBetterFit+1
residual_Sum_of_Squares_min=fitFunctionOutput$residual_Sum_of_Squares
storedFitFunctionOutput=fitFunctionOutput
}
}
counterTotalFit=counterTotalFit+1
print(c(counterBetterFit,
counterCorrectFit,
counterTotalFit,
storedFitFunctionOutput$residual_Sum_of_Squares))
}
return(storedFitFunctionOutput)
}
counterFunction <-
function(data,fitFunction, n_runs_min, n_runs_max, ...)
{
if(!(fitFunction %in% c("linear", "sigmoidal", "double_sigmoidal", "test")) )
{stop("fitFunction should be one of linear, sigmoidal, double_sigmoidal, test")}
counterBetterFit=0
counterCorrectFit=0
counterTotalFit=0
residual_Sum_of_Squares_min=Inf
storedFitFunctionOutput=list()
storedFitFunctionOutput$residual_Sum_of_Squares=Inf
while(counterCorrectFit<n_runs_min & counterTotalFit<n_runs_max)
{
if(fitFunction == "test"){fitFunctionOutput=exampleFitFunction(randomParameter)}
if(fitFunctionOutput[[1]]){
counterCorrectFit=counterCorrectFit+1
if(residual_Sum_of_Squares_min>fitFunctionOutput$residual_Sum_of_Squares){
counterBetterFit=counterBetterFit+1
residual_Sum_of_Squares_min=fitFunctionOutput$residual_Sum_of_Squares
storedFitFunctionOutput=fitFunctionOutput
}
}
counterTotalFit=counterTotalFit+1
print(c(counterBetterFit,
counterCorrectFit,
counterTotalFit,
storedFitFunctionOutput$residual_Sum_of_Squares))
}
return(storedFitFunctionOutput)
}
counterFunction(3,5,7,20)
counterFunction(3,"test",7,20)
counterFunction(3,"test",7,20)
counterFunction(3,"test",7,20)
# Initial Command to Reset the System
rm(list = ls())
if (is.integer(dev.list())){dev.off()}
cat("\014")
normalizeData <-
function(dataInput)
{
timeMin=min(dataInput$hpi)
timeData=dataInput$hpi-timeMin
timeRatio=max(timeData)
timeData=timeData/timeRatio
intensityMin=min(dataInput$GFP)
intensityData=dataInput$GFP-intensityMin
intensityRatio=max(intensityData)
intensityData=intensityData/intensityRatio
dataOutput = data.frame(hpi=timeData,GFP=intensityData)
return(list(dataOutput=dataOutput,
dataScalingParameters=c(timeMin,timeRatio,intensityMin,intensityRatio)))
}
# add usage examples here
# generateRandomData
hpi = seq(3,48,0.5)
GFP=runif(length(hpi), 3.0, 7.5)
dataInput = data.frame(hpi,GFP)
dataOutput = normalizeData(dataInput)
dataOutput
p<-c(1,2,3)
p
p<-c(a=1,b=2,c=3)
p
normalizeData <-
function(dataInput)
{
timeMin=min(dataInput$hpi)
timeData=dataInput$hpi-timeMin
timeRatio=max(timeData)
timeData=timeData/timeRatio
intensityMin=min(dataInput$GFP)
intensityData=dataInput$GFP-intensityMin
intensityRatio=max(intensityData)
intensityData=intensityData/intensityRatio
dataOutput = data.frame(hpi=timeData,GFP=intensityData)
return(list(dataOutput=dataOutput,
dataScalingParameters=c(timeMin=timeMin,
timeRatio=timeRatio,
intensityMin=intensityMin,
intensityRatio=intensityRatio)))
}
# add usage examples here
# generateRandomData
hpi = seq(3,48,0.5)
GFP=runif(length(hpi), 3.0, 7.5)
dataInput = data.frame(hpi,GFP)
dataOutput = normalizeData(dataInput)
dataOutput
normalizeData <-
function(dataInput)
{
timeMin=min(dataInput$hpi)
timeData=dataInput$hpi-timeMin
timeRatio=max(timeData)
timeData=timeData/timeRatio
intensityMin=min(dataInput$GFP)
intensityData=dataInput$GFP-intensityMin
intensityRatio=max(intensityData)
intensityData=intensityData/intensityRatio
dataOutput = data.frame(hpi=timeData,GFP=intensityData)
return(list(timeIntensityData=dataOutput,
dataScalingParameters=c(timeMin=timeMin,
timeRatio=timeRatio,
intensityMin=intensityMin,
intensityRatio=intensityRatio)))
}
# add usage examples here
# generateRandomData
hpi = seq(3,48,0.5)
GFP=runif(length(hpi), 3.0, 7.5)
dataInput = data.frame(hpi,GFP)
dataOutput = normalizeData(dataInput)
dataOutput
unnormalizeData <-
function(dataInput)
{
hpi=dataOutput[[2]][1]+dataOutput[[2]][2]*dataOutput[[1]]$hpi
GFP=dataOutput[[2]][3]+dataOutput[[2]][4]*dataOutput[[1]]$GFP
dataOutput = list(timeIntensityData=data.frame(hpi,GFP))
return(dataOutput)
}
# add usage examples here
# generateRandomData
hpi = seq(3,48,0.5)
GFP=runif(length(hpi), 3.0, 7.5)
dataInput = data.frame(hpi,GFP)
dataOutput = normalizeData(dataInput)
dataInput2=dataOutput
dataOutput2 = unnormalizeData(dataInput2)
dataOutput2
p<-list(a=1,b=2)
p
names(p)
hpi = seq(3,48,0.5)
GFP=runif(length(hpi), 3.0, 7.5)
dataInput = list(timeIntensityData=(data.frame(hpi,GFP)))
dataInput$timeIntensityData$GFP
is.data.frame(dataInput$timeIntensityData)
data_next_check=dataInput$timeIntensityData
"hpi" %in% names(data_next_check)
"hpi" %in% names(data_next_check) & "GFP" %in% names(data_next_check)
"hpi" %in% names(data_next_check) & "GFL" %in% names(data_next_check)
is.numeric(data_next_check$hpi)
is.numeric(data_next_check$hpi) & is.numeric(data_next_check$GFP)
dataCheck <-function(data){
isalist=is.list(data)
if(isalist){
doesitcontainTID=("timeIntensityData" %in% names(data))
if(doesitcontainTID){
issection_dataframe=is.data.frame(data$timeIntensityData)
if(issection_dataframe){
data_next_check=data$timeIntensityData
}
if(!issection_dataframe){
stop("the timeIntensityData section should be a data frame")
}
}
if(!doesitcontainTID){
stop("the list should contain timeIntensityData section")
}
}
if(!isalist){
isadataframe=is.data.frame(data)
if(isadataframe){
data_next_check=data
data2=data
data=list(timeIntensityData=data2)
}
if(!isadataframe){
stop("It should either be a list or a data frame")
}
}
num_columns=ncol(data_next_check)
if(num_columns==2){
doescolnamescorrect=("hpi" %in% names(data_next_check) & "GFP" %in% names(data_next_check))
if(doescolnamescorrect){
arecolumnsnumeric=(is.numeric(data_next_check$hpi) & is.numeric(data_next_check$GFP))
if(arecolumnsnumeric){
print("check done")
return(data)
}
if(!arecolumnsnumeric){
stop("The columns should include numbers")
}
}
if(!doescolnamescorrect){
stop("The colum names should be hpi and GFP")
}
}
if(!num_columns==2){
stop("The data frame should contain 2 columns")
}
}
hpi = seq(3,48,0.5)
GFP=runif(length(hpi), 3.0, 7.5)
dataInput = data.frame(hpi,GFP)
dataOutput = dataCheck(dataInput)
hpi = seq(3,48,0.5)
GFP=runif(length(hpi), 3.0, 7.5)
dataInput = data.frame(hpi,GFP)
is.list(dataInput)
is.data.frame(dataInput)
list(data=dataInput,b=3)
p<-list(data=dataInput,b=3)
is.list(p)
is.data.frame(p)
dataCheck <-function(data){
isalist=(is.list(data) & !is.data.frame(data))
if(isalist){
doesitcontainTID=("timeIntensityData" %in% names(data))
if(doesitcontainTID){
issection_dataframe=is.data.frame(data$timeIntensityData)
if(issection_dataframe){
data_next_check=data$timeIntensityData
}
if(!issection_dataframe){
stop("the timeIntensityData section should be a data frame")
}
}
if(!doesitcontainTID){
stop("the list should contain timeIntensityData section")
}
}
if(!isalist){
isadataframe=is.data.frame(data)
if(isadataframe){
data_next_check=data
data2=data
data=list(timeIntensityData=data2)
}
if(!isadataframe){
stop("It should either be a list or a data frame")
}
}
num_columns=ncol(data_next_check)
if(num_columns==2){
doescolnamescorrect=("hpi" %in% names(data_next_check) & "GFP" %in% names(data_next_check))
if(doescolnamescorrect){
arecolumnsnumeric=(is.numeric(data_next_check$hpi) & is.numeric(data_next_check$GFP))
if(arecolumnsnumeric){
print("check done")
return(data)
}
if(!arecolumnsnumeric){
stop("The columns should include numbers")
}
}
if(!doescolnamescorrect){
stop("The colum names should be hpi and GFP")
}
}
if(!num_columns==2){
stop("The data frame should contain 2 columns")
}
}
hpi = seq(3,48,0.5)
GFP=runif(length(hpi), 3.0, 7.5)
dataInput = data.frame(hpi,GFP)
dataOutput = dataCheck(dataInput)
View(data_next_check)
dataOutput
unnormalizeData <-
function(dataInput)
{
hpi=dataOutput$dataScalingParameters$timeMin+
dataOutput$dataScalingParameters$timeRatio*dataOutput$timeIntensityData$hpi
GFP=dataOutput$dataScalingParameters$intensityMin+
dataOutput$dataScalingParameters$intensityRatio*dataOutput$timeIntensityData$GFP
dataOutput = list(timeIntensityData=data.frame(hpi,GFP))
return(dataOutput)
}
normalizeData <-
function(dataInput)
{
timeMin=min(dataInput$hpi)
timeData=dataInput$hpi-timeMin
timeRatio=max(timeData)
timeData=timeData/timeRatio
intensityMin=min(dataInput$GFP)
intensityData=dataInput$GFP-intensityMin
intensityRatio=max(intensityData)
intensityData=intensityData/intensityRatio
dataOutput = data.frame(hpi=timeData,GFP=intensityData)
return(list(timeIntensityData=dataOutput,
dataScalingParameters=c(timeMin=timeMin,
timeRatio=timeRatio,
intensityMin=intensityMin,
intensityRatio=intensityRatio)))
}
normalizeData <-
function(dataInput)
{
timeMin=min(dataInput$hpi)
timeData=dataInput$hpi-timeMin
timeRatio=max(timeData)
timeData=timeData/timeRatio
intensityMin=min(dataInput$GFP)
intensityData=dataInput$GFP-intensityMin
intensityRatio=max(intensityData)
intensityData=intensityData/intensityRatio
dataOutput = data.frame(hpi=timeData,GFP=intensityData)
return(list(timeIntensityData=dataOutput,
dataScalingParameters=c(timeMin=timeMin,
timeRatio=timeRatio,
intensityMin=intensityMin,
intensityRatio=intensityRatio)))
}
hpi = seq(3,48,0.5)
GFP=runif(length(hpi), 3.0, 7.5)
dataInput = data.frame(hpi,GFP)
dataOutput = normalizeData(dataInput)
dataInput2=dataOutput
dataOutput2 = dataCheck(dataInput2)
dataOutput2
sd(c(3,5))
170*105/151
require("sicegar")
detach(sicegar)
detach("sicegar")
load("~/GitHub/single_cell_virology/processedData/SCV045_filter00_combinedResults.Rda")
View(all_fPc_SCV045_filter00)
all_fPc_SCV045_filter00[7,]
all_fPc_SCV045_filter00[7,]
all_fPc_SCV045_filter00[7,]
t(all_fPc_SCV045_filter00[7,])
t(all_fPc_SCV045_filter00[12,])
source('~/GitHub/ecoli_multiple_growth_conditions/d_Mf_Pathway_Analyze/DESeq_David_MF.R', echo=TRUE)
source('~/GitHub/ecoli_multiple_growth_conditions/d_Mf_Pathway_Analyze/DESeq_David_MF.R', echo=TRUE)
min(selectedDf_simp$log2)
max(selectedDf_simp$log2)
source('~/GitHub/ecoli_multiple_growth_conditions/d_Mf_Pathway_Analyze/DESeq_David_MF.R', echo=TRUE)
source('~/GitHub/ecoli_multiple_growth_conditions/d_Mf_Pathway_Analyze/DESeq_David_MF.R', echo=TRUE)
source('~/GitHub/ecoli_multiple_growth_conditions/d_Mf_Pathway_Analyze/DESeq_David_MF.R', echo=TRUE)
source('~/GitHub/ecoli_multiple_growth_conditions/d_Mf_Pathway_Analyze/DESeq_David_MF.R', echo=TRUE)
